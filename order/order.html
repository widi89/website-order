<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pemesanan Makanan</title>
    <style>
        body {
            color: white;
            background-color: #2C3E50;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
            margin-bottom: 50px;
            /* Menyediakan ruang untuk footer */
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table,
        th,
        td {
            border: 1px solid #ddd;
        }

        th,
        td {
            padding: 10px;
        }

        th {
            color: black;
            background-color: rgb(177, 177, 177);
        }

        input,
        button {
            margin: 5px;
            padding: 8px;
            font-size: 16px;
        }

        button {
            cursor: pointer;

        }

        .update-button {
            background-color: #3498db;
            /* Warna biru untuk tombol update */
            color: white;
        }

        .delete-button {
            background-color: #e74c3c;
            /* Warna merah untuk tombol delete */
            color: white;
        }

        .waiting {
            color: whitesmoke;
            background-color: #F5B041;
            /* Warna kuning untuk latar belakang status waiting */
        }

        .paid {
            color: whitesmoke;
            background-color: #58D68D;
            /* Warna hijau untuk latar belakang status paid */
        }

        footer {
            color: black;
            background-color: #f2f2f2;
            padding: 10px;
            text-align: center;
            position: fixed;
            bottom: 0;
            width: 100%;
            box-sizing: border-box;
            /* Menjamin width 100% termasuk padding */
            left: 0;
            right: 0;
        }
        .listMenu{
            color: crimson ;
        }
    </style>
</head>

<body>
    <h1>Cara Pemesanan Makanan</h1>
    <p>1. Masukan nama pemesan</p>
    <p>2. Tulis dan sesuaikan nama menu pada kolom Food order sesuai dengan List <a class="listMenu" href="../menu/menu.html"
            target="_blank">Menu</a></p>
    <!-- Form Pemesanan -->
    <form id="orderForm">
        <label for="name">Nama:</label>
        <input type="text" id="name" required>

        <label for="foodOrder">Food Order:</label>
        <input type="text" id="foodOrder" required>

        <button type="button" onclick="addOrder()">Tambah Pesanan</button>
    </form>

    <!-- Tabel Pemesanan -->
    <table id="orderTable">
        <tr>
            <th>Nama</th>
            <th>Food Order</th>
            <th>Remark</th>
            <th>Aksi</th>
        </tr>
    </table>
    <footer>
        <p>&copy; 2024 Elcalief Hallal And Healthy</p>
    </footer>
    <script>
        function addOrder() {
            var name = document.getElementById('name').value;
            var foodOrder = document.getElementById('foodOrder').value;

            if (name && foodOrder) {
                var table = document.getElementById('orderTable');
                var row = table.insertRow(-1);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);

                cell1.innerHTML = name;
                cell2.innerHTML = foodOrder;
                cell3.innerHTML = 'Waiting';
                cell4.innerHTML = '<button onclick="updateRemark(this)">Update</button> ' +
                    '<button onclick="deleteOrder(this)">Delete</button>';

                // Clear input setelah menambah pesanan
                document.getElementById('name').value = '';
                document.getElementById('foodOrder').value = '';

                // Simpan data ke local storage
                saveOrdersToLocalStorage();
            }
        }

        // Function untuk menempatkan pesanan (menyimpan ke local storage)
        function saveOrdersToLocalStorage() {
            var table = document.getElementById('orderTable');
            var orders = [];

            // Loop through rows (skip header)
            for (var i = 1; i < table.rows.length; i++) {
                var order = {
                    name: table.rows[i].cells[0].innerHTML,
                    foodOrder: table.rows[i].cells[1].innerHTML,
                    remark: table.rows[i].cells[2].innerHTML
                };
                orders.push(order);
            }

            // Simpan data ke local storage
            localStorage.setItem('orders', JSON.stringify(orders));
        }

        // Function untuk membersihkan tabel
        function clearTable() {
            document.getElementById('orderTable').innerHTML = '<tr><th>Nama</th><th>Food Order</th><th>Remark</th><th>Aksi</th></tr>';
        }

        // Function untuk mengupdate remark
        function updateRemark(button) {
            var password = prompt('Masukkan password:');
            if (password === 'tua') {
                var row = button.parentNode.parentNode;
                var remarkCell = row.cells[2];

                if (remarkCell.innerHTML === 'Paid') {
                    alert('Pesanan sudah dibayar.');
                } else {
                    remarkCell.innerHTML = 'Paid';
                    row.classList.remove('waiting');
                    row.classList.add('paid');

                    // Simpan kembali data ke local storage setelah update
                    saveOrdersToLocalStorage();
                }
            } else {
                alert('Password salah. Remark tidak dapat diupdate.');
            }
        }

        // Function untuk menghapus pesanan
        function deleteOrder(button) {
            var password = prompt('Masukkan password:');
            if (password === 'tua') { // Ganti 'your_password' dengan password yang diinginkan
                var row = button.parentNode.parentNode;
                row.parentNode.removeChild(row);

                // Simpan kembali data ke local storage setelah delete
                saveOrdersToLocalStorage();
            } else {
                alert('Password salah. Pesanan tidak dapat dihapus.');
            }
        }
        function autoRefresh() {
            setInterval(function () {
                // Pembaruan data dari Local Storage
                var orders = localStorage.getItem('orders');
                if (orders) {
                    orders = JSON.parse(orders);
                    var table = document.getElementById('orderTable');

                    // Bersihkan tabel
                    clearTable();

                    // Populasi tabel dengan data terbaru dari Local Storage
                    for (var i = 0; i < orders.length; i++) {
                        var row = table.insertRow(-1);
                        var cell1 = row.insertCell(0);
                        var cell2 = row.insertCell(1);
                        var cell3 = row.insertCell(2);
                        var cell4 = row.insertCell(3);

                        cell1.innerHTML = orders[i].name;
                        cell2.innerHTML = orders[i].foodOrder;
                        cell3.innerHTML = orders[i].remark;
                        cell4.innerHTML = '<button onclick="updateRemark(this)">Update</button> ' +
                            '<button onclick="deleteOrder(this)">Delete</button>';

                        // Tambahkan kelas CSS sesuai dengan status remark
                        if (orders[i].remark === 'Paid') {
                            row.classList.add('paid');
                        } else {
                            row.classList.add('waiting');
                        }
                    }
                }
            }, 5000); // Setiap 5 detik
        }

        // Panggil fungsi autoRefresh saat halaman dimuat
        window.onload = function () {
            autoRefresh();
        };
        // Load data dari local storage saat halaman dimuat
        window.onload = function () {
            var orders = localStorage.getItem('orders');
            if (orders) {
                orders = JSON.parse(orders);
                var table = document.getElementById('orderTable');

                for (var i = 0; i < orders.length; i++) {
                    var row = table.insertRow(-1);
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);
                    var cell4 = row.insertCell(3);

                    cell1.innerHTML = orders[i].name;
                    cell2.innerHTML = orders[i].foodOrder;
                    cell3.innerHTML = orders[i].remark;
                    cell4.innerHTML = '<button onclick="updateRemark(this)">Update</button> ' +
                        '<button onclick="deleteOrder(this)">Delete</button>';

                    // Tambahkan kelas CSS sesuai dengan status remark
                    if (orders[i].remark === 'Paid') {
                        row.classList.add('paid');
                    } else {
                        row.classList.add('waiting');
                    }
                }
            }
        };
    </script>
</body>

</html>